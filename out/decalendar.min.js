!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){this.view=a,this.$element=c,this.begin=b.begin,this.end=b.end,this.step=b.step,this.minutePx=this.getMinutePxFromDOM(),this.items=[],this.overlapLanes=1;var d=this;c.find(a.config.select.cell).on("click",function(a){d.onClickCell($(this))})}b.exports=d;a("./Item.js");d.prototype.addItem=function(a){this.items.push(a)},d.prototype.update=function(){this.items.forEach(function(a){this.locate(a)},this)},d.prototype.onClickCell=function(a){console.log("clickCell")},d.prototype.locate=function(a){var b=this.$element.position(),c=(this.$element.width()-2)/this.overlapLanes;a.$element.css({left:b.left+a.overlapLane*c,top:b.top+this.scaledDifference(this.begin,a.begin),height:this.scaledDifference(a.begin,a.end),width:c-2})},d.prototype.scaledDifference=function(a,b){return Math.round(b.diff(a)/6e4*this.minutePx)},d.prototype.getMinutePxFromDOM=function(){return this.$element.find(this.view.config.select.cell).eq(1).position().top/this.step.asMinutes()},d.prototype.solveOverlaps=function(){this.overlapLanes=1,this.items.forEach(function(a){a.overlapLane=-1}),this.items.forEach(function(a){var b={},c=[a];a.overlapLane>=0&&(b[a.overlapLane]=!0),this.items.forEach(function(d){a!=d&&a.overlaps(d)&&(d.overlapLane>=0&&(b[d.overlapLane]=!0),c.push(d))}),c.forEach(function(a){if(a.overlapLane<0)for(var d=0;d<c.length;d++)if(!b[d]){a.overlapLane=d,b[d]=!0;break}}),this.overlapLanes=Math.max(this.overlapLanes,c.length)},this)}},{"./Item.js":3}],2:[function(a,b,c){function d(a,b){function c(c){e||new Date-f<b.hoverDelay||(a.addClass(b["class"].hover),e=!0)}function d(c){f=new Date,e&&(a.removeClass(b["class"].hover),e=!1)}var e=!1,f=0;a.on("mousemove",c).on("touchstart",d),c()}b.exports=d},{}],3:[function(a,b,c){function d(a,b,c){this.config=a.view.config,this.column=a,this.$element=c,this.id=b.id,this.begin=b.begin,this.end=b.end;var d=this;this.$element.on("mousedown",function(a){d.select()}),this.$element.on("mouseup",function(a){d.finish()})}b.exports=d,d.prototype.notOverlaps=function(a){return this.end.isSameOrBefore(a.begin)||this.begin.isSameOrAfter(a.end)},d.prototype.overlaps=function(a){return!this.notOverlaps(a)},d.prototype.select=function(){this.move=!1;var a=this;this.moveTimeout=setTimeout(function(){a.move=!0,a.$element.addClass(a.config["class"].moveItem)},this.config.moveDelay)},d.prototype.finish=function(){clearTimeout(this.moveTimeout),this.move?(this.$element.removeClass(this.config["class"].moveItem),console.log("locate",this.id)):console.log("Open",this.id)}},{}],4:[function(a,b,c){function d(a,b,c){function d(){f||(f=setTimeout(e,b.resizeDelay))}function e(){f=null,c()}var f;a.on("resize",d)}b.exports=d},{}],5:[function(a,b,c){function d(a,b){this.config=$.extend(!0,{},e,b),this.$element=a,this.columns={},this.locale=this.config.locale||window.navigator.userLanguage||window.navigator.language,moment.locale(this.locale),this.hoverLogic=new f(a,this.config);var c=this;this.resizeLogic=new g($(window),this.config,function(){c.update()})}b.exports=d;var e=a("./config.js"),f=a("./Hover.js"),g=a("./Resize.js"),h=a("./Column.js"),i=a("./Item.js");d.prototype.day=function(a,b,c,d){this.$element.empty(),this.columns={};var e=d.map(function(d){return{id:String(d.id),name:d.name,begin:a,end:b,step:c}});return this.config.displayHead&&this.createHead(e),this.createBody({begin:a,end:b,step:c},e),this},d.prototype.update=function(){Object.keys(this.columns).forEach(function(a){this.columns[a].update()},this)},d.prototype.getColumn=function(a){return this.columns[a]},d.prototype.getText=function(a){return(this.config.text[this.locale]||{})[a]||this.config.text.en[a]},d.prototype.addItems=function(a){a.forEach(function(a){var b=this.getColumn(a.column);if(void 0!==b){var c=this.createItemNode(a);this.$body.append(c),b.addItem(new i(b,a,c))}},this),Object.keys(this.columns).forEach(function(a){this.columns[a].solveOverlaps(),this.columns[a].update()},this)},d.prototype.createHead=function(a){var b=this.createNode("head");this.$element.append(b);var c=this.createLabelColumnNode();c.append(this.createNode("cell").html("&nbsp;")),b.append(c),a.forEach(function(a){c=this.createColumnNode(a),c.append(this.createNode("cell").text(a.name)),b.append(c)},this),this.$head=b},d.prototype.createBody=function(a,b){var c=this.createNode("body");this.$element.append(c);var d=null;if(void 0!==a){d=this.createLabelColumnNode();for(var e=a.begin.clone();e.isBefore(a.end);){var f=this.createCellNode(void 0,e);this.config.isMajorRow(e)&&f.addClass(this.config["class"].majorRow).text(e.format(this.config.rowTimeFormat)),d.append(f),e.add(a.step)}c.append(d)}b.forEach(function(a){d=this.createColumnNode(a);for(var b=a.begin.clone();b.isBefore(a.end);){var e=this.createCellNode(a,b).addClass(this.config["class"].openCell);this.config.isMajorRow(b)&&e.addClass(this.config["class"].majorRow),d.append(e),b.add(a.step)}c.append(d),this.columns[a.id]=new h(this,a,d)},this),this.$body=c},d.prototype.createLabelColumnNode=function(){return this.createNode("labelColumn")},d.prototype.createColumnNode=function(a){return this.createNode("column").attr(this.config.attr.id,a.id)},d.prototype.createCellNode=function(a,b){var c=this.createNode("cell").attr(this.config.attr.time,b.toISOString());return void 0!==a&&c.attr(this.config.attr.id,a.id),c},d.prototype.createItemNode=function(a){return this.createNode("item").attr(this.config.attr["if"],a.id)},d.prototype.createNode=function(a){return this.config.$node[a].clone()}},{"./Column.js":1,"./Hover.js":2,"./Item.js":3,"./Resize.js":4,"./config.js":6}],6:[function(a,b,c){var d=a("./utility.js");b.exports={defaultDuration:moment.duration(1,"h"),rowTimeFormat:"LT",isMajorRow:d.isFullHour,displayHead:!0,resizeDelay:66,hoverDelay:500,moveDelay:500,text:{en:{reserve:"Reserve"},fi:{reserve:"Varaa"}},$node:{head:$('<div class="calendar-head row m-0"></div>'),body:$('<div class="calendar row m-0"></div>'),labelColumn:$('<div class="calendar-col-label p-0"></div>'),column:$('<div class="calendar-col col p-0"></div>'),cell:$('<div class="calendar-cell p-0"></div>'),item:$('<div class="calendar-item"><span class="title"></span><div class="calendar-handle"><span></span></div></div>')},select:{cell:".calendar-cell",itemTitle:".title"},"class":{hover:"calendar-hovering",majorRow:"calendar-row-major",moveItem:"calendar-item-move",openCell:"calendar-cell-open",targetItem:"calendar-target"},attr:{id:"data-decalendar-id",time:"data-decalendar-time"}}},{"./utility.js":8}],7:[function(a,b,c){var d=a("./View.js");window.deCalendar=d},{"./View.js":5}],8:[function(a,b,c){b.exports={isFullHour:function(a){return 0===a.minutes()},findByClass:function(a,b){return a.find("."+b)},findByAttr:function(a,b,c){return a.find("["+b+'="'+c+'"]')}}},{}]},{},[7]);